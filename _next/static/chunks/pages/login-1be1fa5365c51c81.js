(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{932:function(b,a){"use strict";function c(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}a.Z=function(a){return function(){var b=this,d=arguments;return new Promise(function(f,g){var h=a.apply(b,d);function e(a){c(h,f,g,e,i,"next",a)}function i(a){c(h,f,g,e,i,"throw",a)}e(void 0)})}}},6429:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return c(7018)}])},9835:function(b,c,a){"use strict";var d=a(932).Z,e=(0,a(2648).Z)(a(4051)),f=a(9159);function g(){return(g=d(e.default.mark(function a(b,c){var d,g,h;return e.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,d={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:b,password:c})},a.next=4,fetch(f.baseUrl+"/api/v1/auth/authenticate",d);case 4:return g=a.sent,a.next=7,g.json();case 7:return h=a.sent,a.abrupt("return",{ok:200==g.status,data:h});case 11:return a.prev=11,a.t0=a.catch(0),a.abrupt("return",{ok:!1,data:a.t0.message});case 14:case"end":return a.stop()}},a,null,[[0,11]])}))).apply(this,arguments)}b.exports={login:function(a,b){return g.apply(this,arguments)}}},9159:function(a){"use strict";a.exports={baseUrl:"http://localhost:9292"}},2814:function(b,c,a){"use strict";var d=a(932).Z,e=(0,a(2648).Z)(a(4051)),f=a(9159);function g(){return(g=d(e.default.mark(function a(b){var c,d,g;return e.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,c={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)}},a.next=4,fetch(f.baseUrl+"/api/v1/votes",c);case 4:return d=a.sent,a.next=7,d.json();case 7:return g=a.sent,a.abrupt("return",{ok:200==d.status,data:g});case 11:return a.prev=11,a.t0=a.catch(0),a.abrupt("return",{ok:!1,data:a.t0.message});case 14:case"end":return a.stop()}},a,null,[[0,11]])}))).apply(this,arguments)}function h(){return(h=d(e.default.mark(function a(b,c){var d,g,h;return e.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,d={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)}},a.next=4,fetch(f.baseUrl+"/api/v1/votes/".concat(c,"/questions"),d);case 4:return g=a.sent,a.next=7,g.json();case 7:return h=a.sent,a.abrupt("return",{ok:200==g.status,data:h});case 11:return a.prev=11,a.t0=a.catch(0),a.abrupt("return",{ok:!1,data:a.t0.message});case 14:case"end":return a.stop()}},a,null,[[0,11]])}))).apply(this,arguments)}function i(){return(i=d(e.default.mark(function a(b,c,d){var g,h,i;return e.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,g={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)},body:JSON.stringify(d)},a.next=4,fetch(f.baseUrl+"/api/v1/votes/".concat(c,"/questions"),g);case 4:return h=a.sent,a.next=7,h.json();case 7:return i=a.sent,a.abrupt("return",{ok:201==h.status,data:i});case 11:return a.prev=11,a.t0=a.catch(0),a.abrupt("return",{ok:!1,data:a.t0.message});case 14:case"end":return a.stop()}},a,null,[[0,11]])}))).apply(this,arguments)}function j(){return(j=d(e.default.mark(function a(b,c){var d,g,h;return e.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,d={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)},body:JSON.stringify(c)},a.next=4,fetch(f.baseUrl+"/api/v1/votes",d);case 4:return g=a.sent,a.next=7,g.json();case 7:return h=a.sent,a.abrupt("return",{ok:201==g.status,data:h});case 11:return a.prev=11,a.t0=a.catch(0),a.abrupt("return",{ok:!1,data:a.t0.message});case 14:case"end":return a.stop()}},a,null,[[0,11]])}))).apply(this,arguments)}function k(){return(k=d(e.default.mark(function a(b,c,d){var g,h,i;return e.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,g={method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(b)},body:JSON.stringify({title:c})},a.next=4,fetch(f.baseUrl+"/api/v1/votes/"+d,g);case 4:return h=a.sent,a.next=7,h.json();case 7:return i=a.sent,a.abrupt("return",{ok:201==h.status,data:i});case 11:return a.prev=11,a.t0=a.catch(0),a.abrupt("return",{ok:!1,data:a.t0.message});case 14:case"end":return a.stop()}},a,null,[[0,11]])}))).apply(this,arguments)}b.exports={getOwnedVote:function(a){return g.apply(this,arguments)},SetOwnedVotes:function(a,b){return j.apply(this,arguments)},getVoteQuestion:function(a,b){return h.apply(this,arguments)},SetVoteQuestion:function(a,b,c){return i.apply(this,arguments)},UpdateVoteTitle:function(a,b,c){return k.apply(this,arguments)}}},7018:function(f,b,a){"use strict";function g(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}a.r(b),a.d(b,{default:function(){return r}});var c=a(4051),h=a.n(c),i=a(5893),j=a(7294),k=a(2130),l=a(2914),m=a(5005),n=a(1163),o=a(2920),d=a(9835),p=a.n(d),e=a(2814),q=a.n(e);function r(){var s=(0,n.useRouter)(),a=(0,j.useContext)(k.Z),t=(a.role,a.setRole),u=a.setUser,v=a.setOwnedVotes,b=(0,j.useState)("jessie"),e=b[0],w=b[1],c=(0,j.useState)("pinkman"),f=c[0],x=c[1],d=(0,j.useState)(!1),r=d[0],y=d[1];function z(){var a;return(z=(a=h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return b.preventDefault(),a.next=3,p().login(e,f);case 3:if(!(c=a.sent).ok){a.next=16;break}return r?t("admin"):t("voter"),u(c.data.attributes),d=c.data.attributes.auth_token,a.next=10,q().getOwnedVote(d);case 10:(c=a.sent).ok&&v(c.data.data),(0,o.Am)("Log in successfully"),s.push("/","/Vote_Frontend"),a.next=17;break;case 16:o.Am.error("log in fail");case 17:case"end":return a.stop()}},a)}),function(){var b=this,c=arguments;return new Promise(function(e,f){var h=a.apply(b,c);function d(a){g(h,e,f,d,i,"next",a)}function i(a){g(h,e,f,d,i,"throw",a)}d(void 0)})})).apply(this,arguments)}return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsx)("div",{className:"modal-dialog",children:(0,i.jsx)("div",{className:"modal-content",children:(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsxs)(l.Z,{onSubmit:function(a){!function(a){return z.apply(this,arguments)}(a)},children:[(0,i.jsxs)(l.Z.Group,{className:"mb-3",children:[(0,i.jsx)(l.Z.Label,{children:"Account"}),(0,i.jsx)(l.Z.Control,{type:"text",value:e,onChange:function(a){w(a.target.value)},placeholder:"Enter username"})]}),(0,i.jsxs)(l.Z.Group,{className:"mb-3",controlId:"formBasicPassword",children:[(0,i.jsx)(l.Z.Label,{children:"Password"}),(0,i.jsx)(l.Z.Control,{type:"password",value:f,onChange:function(a){x(a.target.value)},placeholder:"Password"})]}),(0,i.jsx)(l.Z.Group,{className:"mb-3",children:(0,i.jsx)(l.Z.Check,{type:"checkbox",label:"Is Admin ?",value:r,onChange:function(a){y(a.target.checked)}})}),(0,i.jsx)("div",{align:"center",children:(0,i.jsx)(m.Z,{className:"w-100",variant:"primary",type:"submit",children:"Submit"})})]})})})})})})}}},function(a){a.O(0,[529,774,888,179],function(){var b;return a(a.s=6429)}),_N_E=a.O()}])